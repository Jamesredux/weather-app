(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var s=a(5),r=a.n(s),n=a(21),c=a.n(n),i=(a(28),a(7)),u=a(8),o=a(6),h=a(10),l=a(9),d=(a(29),a(30),a(17)),p=a(20),j=a(12),m=a.n(j),b=a(15),v=a(41),O=a(42),f=a(43),y=a(0),x=function(e){Object(h.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this.props.data,t=e.city,a=e.country,s=e.sunrise,r=e.sunset,n=e.temp,c=e.feels_like,i=e.uvi,u=e.humidity,o=e.dt,h=e.icon,l=e.details;return Object(y.jsxs)("div",{className:"weather-current",children:[Object(y.jsxs)("div",{className:"city-name",children:[Object(y.jsxs)("div",{className:"large city-box",children:[t,","]}),Object(y.jsx)("div",{className:"large",children:a})]}),Object(y.jsx)("div",{className:"date-box",children:Object(y.jsx)("div",{className:"current-time yellow",children:o})}),Object(y.jsxs)("div",{className:"main-info-box",children:[Object(y.jsxs)("div",{className:"current-temp",children:[n,"metric"===this.props.units?Object(y.jsx)("span",{children:"\xb0C"}):Object(y.jsx)("span",{children:"\xb0F"})]}),Object(y.jsx)("div",{className:"details-icon",children:Object(y.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(h,"@2x.png"),height:"100",width:"100",alt:"icon"})})]}),Object(y.jsxs)("div",{className:"extra-box-1",children:[Object(y.jsx)("div",{className:"details-extra",children:l}),Object(y.jsxs)("div",{className:"feels-like",children:["Feels Like: ",c,"metric"===this.props.units?Object(y.jsx)("span",{children:"\xb0C"}):Object(y.jsx)("span",{children:"\xb0F"})]})]}),Object(y.jsxs)("div",{className:"extra-box-2",children:[Object(y.jsxs)("div",{className:"uvi",children:["UVI: ",i]}),Object(y.jsxs)("div",{className:"humidity",children:["Humidity: ",u]})]}),Object(y.jsxs)("div",{className:"sunrise-sunset",children:[Object(y.jsxs)("div",{className:"sunrise",children:["Sunrise: ",Object(y.jsx)("span",{className:"yellow",children:s})]}),Object(y.jsxs)("div",{className:"sunset",children:["Sunset: ",Object(y.jsx)("span",{className:"yellow",children:r})]})]})]})}}]),a}(s.Component),g=function(e){Object(h.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.hourly.map((function(t){return Object(y.jsxs)("div",{className:"hour-row",children:[Object(y.jsx)("div",{className:"hour-box yellow bigger",children:Object(y.jsx)("p",{children:t.time})}),Object(y.jsx)("div",{className:"hour-temp bigger",children:Object(y.jsxs)("p",{children:[t.temp,"metric"===e.props.units?Object(y.jsx)("span",{children:"\xb0C"}):Object(y.jsx)("span",{children:"\xb0F"})]})}),Object(y.jsx)("div",{className:"hour-weather bigger",children:Object(y.jsx)("p",{children:t.main})}),Object(y.jsxs)("div",{className:"rain-chance",children:["Chance of Rain: ",t.pop,"%"]})]},t.id)}));return Object(y.jsxs)("div",{className:"hours-container",children:[Object(y.jsx)("div",{className:"hours-header",children:Object(y.jsx)("p",{className:"large",children:"Hourly Forcast"})}),Object(y.jsx)("div",{className:"hours-roll",children:t})]})}}]),a}(s.Component),k=a.p+"static/media/snow.16bc2923.jpg",N=a.p+"static/media/cloudy.b547a3e7.jpg",C=a.p+"static/media/clear.a23f86ee.jpg",S=a.p+"static/media/thunderstorm.eeb02130.jpg",w=a.p+"static/media/rain.e2e29bb5.jpg",E=a.p+"static/media/weather.347d25f4.jpg",T=function(e){Object(h.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).isEmpty=function(e){return Object.keys(e).length>0},s.state={units:"metric",error:null,current:{},hourly:[]},s.getCoords=s.getCoords.bind(Object(o.a)(s)),s.getWeather=s.getWeather.bind(Object(o.a)(s)),s.changeScale=s.changeScale.bind(Object(o.a)(s)),s}return Object(u.a)(a,[{key:"componentDidMount",value:function(e){this.props.city&&this.getWeather()}},{key:"componentDidUpdate",value:function(e){this.props.city!==e.city?this.getWeather():this.props.units!==e.units&&this.changeScale(this.props.units)}},{key:"getCoords",value:function(){var e=[];return!1===this.isEmpty(this.props.city)?console.log("getCoords error - -no city in props"):e.push(this.props.city.lat,this.props.city.lon),e}},{key:"getWeather",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,a,s=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getCoords(),"1298e2c44b15a4187449fd0c07c579b8",e.next=4,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(t[0],"&lon=").concat(t[1],"&units=").concat(this.state.units,"&exclude={part}&appid=").concat("1298e2c44b15a4187449fd0c07c579b8")).then((function(e){if(!e.ok)throw Error("Error Fetching Data. Reason: ".concat(e.statusText));return e})).then((function(e){return e.json()})).catch((function(e){s.setState({error:e.message})}));case 4:(a=e.sent)&&this.updateWeatherState(a);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateWeatherState",value:function(e){this.updateBackground(e.current.weather[0].id);var t=e.timezone,a=this.parseCurrentData(e.current,t),s=this.parseHourlyData(e.hourly,t);this.setState({error:null,timezone:t,current:a,hourly:Object(p.a)(s)})}},{key:"updateBackground",value:function(e){var t,a=document.documentElement;t=e<300?S:e<600?w:e<700?k:800===e?C:e>800?N:E,a.style.backgroundImage="url(".concat(t,")")}},{key:"parseCurrentData",value:function(e,t){var a={city:this.props.city.name,country:this.props.city.country,temp:Math.round(e.temp),feels_like:Math.round(e.feels_like),uvi:e.uvi,details:e.weather[0].description,icon:e.weather[0].icon,humidity:e.humidity},s=this.getDateTime(e.dt,t),r=this.getTime(e.sunrise,t),n=this.getTime(e.sunset,t);return a.dt=s,a.sunrise=r,a.sunset=n,a}},{key:"getDateTime",value:function(e,t){var a=Object(v.a)(e),s=Object(O.a)(a,t);return Object(f.a)(s,"EEEEEE dd MMM yyyy HH:mm",{timesZone:t})}},{key:"getTime",value:function(e,t){var a=Object(v.a)(e),s=Object(O.a)(a,t);return Object(f.a)(s,"HH:mm",{timeZone:t})}},{key:"changeScale",value:function(e){var t=this;"imperial"===e?this.setState({units:"imperial"},(function(){t.convertTemp("imperial")})):this.setState({units:"metric"},(function(){t.convertTemp("metric")}))}},{key:"convertTemp",value:function(e){if(this.state.current.temp){var t=this.updateHourlyTemps(e),a=[this.state.current.temp,this.state.current.feels_like],s=this.convertCurrentTemps(a,e);this.updateTemps(s,t)}}},{key:"convertCurrentTemps",value:function(e,t){var a=this,s=[];return e.forEach((function(e){s.push(a.calcNewTemp(e,t))})),s}},{key:"updateHourlyTemps",value:function(e){var t=this;return this.state.hourly.map((function(e){return Object(d.a)({},e)})).map((function(a){var s=t.calcNewTemp(a.temp,e);return a.temp=s,a}))}},{key:"calcNewTemp",value:function(e,t){return"metric"===t?this.getCelsiusFromFahrenheit(e):this.getFahrenheitFromCelsius(e)}},{key:"updateTemps",value:function(e,t){this.setState((function(a){return{current:Object(d.a)(Object(d.a)({},a.current),{},{temp:e[0],feels_like:e[1]}),hourly:Object(p.a)(t)}}))}},{key:"getCelsiusFromFahrenheit",value:function(e){return Math.round(5/9*(e-32))}},{key:"getFahrenheitFromCelsius",value:function(e){return Math.round(1.8*e+32)}},{key:"parseHourlyData",value:function(e,t){var a=this;return e.splice(24),e.map((function(e){return a.convertHourlyData(e,t)}))}},{key:"convertHourlyData",value:function(e,t){var a={id:e.dt,temp:Math.round(e.temp),pop:Math.round(100*e.pop),main:e.weather[0].main},s=this.getTime(e.dt,t);return a.time=s,a}},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"content-container",children:[this.state.error&&Object(y.jsx)("div",{className:"error-box",children:Object(y.jsx)("p",{children:this.state.error})}),this.state.current.dt&&Object(y.jsx)(x,{data:this.state.current,units:this.state.units}),this.state.hourly.length>0&&Object(y.jsx)(g,{hourly:this.state.hourly,units:this.state.units})]})}}]),a}(s.Component),F=a(22),M=a(23),D=Object(y.jsx)(F.a,{icon:M.a}),H=function(e){Object(h.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={value:"",searchResult:{}},s.handleChange=s.handleChange.bind(Object(o.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(o.a)(s)),s.updateState=s.updateState.bind(Object(o.a)(s)),s}return Object(u.a)(a,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){this.fetchCity(this.state.value),e.preventDefault()}},{key:"fetchCity",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var a,s=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"1298e2c44b15a4187449fd0c07c579b8",e.next=3,fetch("https://api.openweathermap.org/geo/1.0/direct?q=".concat(t,"&limit=5&APPID=").concat("1298e2c44b15a4187449fd0c07c579b8")).then((function(e){if(!e.ok)throw Error("Error fetching data. Reason: ".concat(e.statusText));return e})).then((function(e){return e.json()})).catch((function(e){s.props.handleError(e.message)}));case 3:(a=e.sent)&&this.updateState(a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateState",value:function(e){var t=this;if(e.length<1){this.setState({searchError:!0});this.props.handleError("Sorry: Not Found. Please try again")}else this.setState((function(t){return{value:"",searchResult:e[0],searchError:!1,error:null}}),(function(){t.props.submitForm(t.state.searchResult)}))}},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"form-area",children:[Object(y.jsx)("div",{className:"logo",children:Object(y.jsx)("h2",{children:"Rain or Shine?"})}),Object(y.jsx)("div",{className:"search-bar",children:Object(y.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(y.jsx)("input",{type:"text",value:this.state.value,placeholder:"Search Location",onChange:this.handleChange}),Object(y.jsx)("button",{className:"search",type:"submit",children:D})]})}),Object(y.jsx)("div",{className:"temp-switch",children:Object(y.jsxs)("label",{className:"switch",children:[Object(y.jsx)("input",{type:"checkbox",name:"temp",onClick:this.props.changeScale}),Object(y.jsx)("span",{className:"slider round",children:Object(y.jsxs)("div",{className:"temp-letters",children:[Object(y.jsx)("span",{children:"C"}),Object(y.jsx)("span",{children:"F"})]})})]})})]})}}]),a}(r.a.Component),R=function(){return Object(y.jsx)("div",{className:"footer static-bar",children:Object(y.jsx)("div",{className:"explainer",children:Object(y.jsxs)("p",{children:["Created as part of the"," ",Object(y.jsx)("a",{href:"https://www.theodinproject.com/paths/full-stack-javascript/courses/javascript/lessons/weather-app",children:"The Odin Project"})," ","by ",Object(y.jsx)("a",{href:"https://github.com/Jamesredux",children:"James Redux"}),"."," ",Object(y.jsx)("a",{href:"https://github.com/Jamesredux/weather-app",children:"View Code"})]})})})},W=function(e){Object(h.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={city:null,units:"metric",errorMessage:null},e.updateCity=e.updateCity.bind(Object(o.a)(e)),e.changeScale=e.changeScale.bind(Object(o.a)(e)),e.handleError=e.handleError.bind(Object(o.a)(e)),e}return Object(u.a)(a,[{key:"updateCity",value:function(e){this.setState({city:e,errorMessage:null})}},{key:"changeScale",value:function(e){e.target.checked?this.setState({units:"imperial"}):this.setState({units:"metric"})}},{key:"handleError",value:function(e){this.setState({city:null,errorMessage:e})}},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"container",children:[Object(y.jsx)(H,{submitForm:this.updateCity,changeScale:this.changeScale,handleError:this.handleError}),this.state.errorMessage&&Object(y.jsxs)("div",{className:"error-box",children:[Object(y.jsx)("p",{className:"alert",children:this.state.errorMessage}),Object(y.jsx)("p",{className:"small-text",children:"To make search more precise put the city's name, comma, 2-letter country code (ISO3166). Example: London, GB or London, CA"})]}),!this.state.errorMessage&&Object(y.jsx)(T,{city:this.state.city,units:this.state.units}),Object(y.jsx)(R,{})]})}}]),a}(s.Component),I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,44)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),s(e),r(e),n(e),c(e)}))};c.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(W,{})}),document.getElementById("root")),I()}},[[38,1,2]]]);
//# sourceMappingURL=main.dd677f9b.chunk.js.map